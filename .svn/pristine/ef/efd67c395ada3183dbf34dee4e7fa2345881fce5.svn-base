#include <delay.h>
#include <gpio.h>
#include <stm32.h>
#include "USART.h"
#include "leds.h"

void setup_RCC() {
  RCC->AHB1ENR |= RCC_AHB1ENR_GPIOAEN;
  RCC->AHB1ENR |= RCC_AHB1ENR_GPIOBEN;
  RCC->APB1ENR |= RCC_APB1ENR_USART2EN;
  __NOP();
}

void setup() {
  setup_RCC();
  USART_setup(BAUDRATE);
  leds_setup();
}

int main() {
  setup();
  USART_enable();

  for (;;) {
    USART_write_string("Placuszki");

  }
}
